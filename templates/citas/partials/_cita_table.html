{% if citas %}
<div class="table-responsive">
    <table class="table table-hover mb-0">
        <thead class="table-light">
            <tr>
                <th>Paciente</th>
                <th>Terapeuta</th>
                <th>Fecha</th>
                <th>Hora</th>
                <th>Estado</th>
                <th>Duraci√≥n</th>
                <th class="text-center">Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for cita in citas %}
                <tr>
                    <td>
                        {% if cita.paciente %}
                            <strong>{{ cita.paciente.nombre_completo }}</strong>
                        {% else %}
                            <span class="text-muted">Sin paciente</span>
                        {% endif %}
                    </td>
                    <td>{{ cita.terapeuta.nombre_completo|default:"-" }}</td>
                    <td>{{ cita.fecha_hora|date:"d/m/Y" }}</td>
                    <td>{{ cita.fecha_hora|time:"H:i" }} - {{ cita.get_hora_fin|time:"H:i" }}</td>
                    <td>
                        {% if cita.estado == 'disponible' %}
                            <span class="badge bg-success">Disponible</span>
                        {% elif cita.estado == 'ocupada' %}
                            <span class="badge bg-primary">Ocupada</span>
                        {% elif cita.estado == 'completada' %}
                            <span class="badge bg-info">Completada</span>
                        {% elif cita.estado == 'cancelada' %}
                            <span class="badge bg-danger">Cancelada</span>
                        {% endif %}
                    </td>
                    <td>{{ cita.duracion_minutos }} min</td>
                    <td class="text-center">
                        <a href="{% url 'citas:detalle' cita.pk %}" class="btn btn-sm btn-info" title="Ver detalle">
                            <i class="fas fa-eye"></i>
                        </a>
                        <a href="{% url 'citas:editar' cita.pk %}" class="btn btn-sm btn-primary" title="Editar">
                            <i class="fas fa-edit"></i>
                        </a>
                        <a href="{% url 'citas:cancelar' cita.pk %}" class="btn btn-sm btn-warning" title="Cancelar">
                            <i class="fas fa-times"></i>
                        </a>
                    </td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% else %}
    <div class="alert alert-info m-3">
        <i class="fas fa-info-circle"></i> No hay citas registradas.
        <a href="{% url 'citas:crear' %}" class="btn btn-sm btn-primary">Crear nueva cita</a>
    </div>
{% endif %}
