{% extends 'base/base.html' %}

{% block title %}Antecedentes{% endblock %}

{% block page_title %}Antecedentes{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-lg-8 offset-lg-2">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-light d-flex justify-content-between align-items-center">
                    <h5 class="mb-0"><i class="fas fa-history"></i> {{ paciente.nombre_completo }}</h5>
                    <a href="{% url 'pacientes:antecedentes-editar' paciente.pk %}" class="btn btn-primary btn-sm">
                        <i class="fas fa-edit"></i> Editar
                    </a>
                </div>
                <div class="card-body">
                    {% if antecedentes_pat or antecedentes %}
                        {% if antecedentes_pat %}
                        <h6 class="mb-3 border-bottom pb-2"><i class="fas fa-heart"></i> Antecedentes patológicos</h6>
                        <div class="row">
                            <div class="col-md-4"><p><strong>Hipertensión:</strong> {% if antecedentes_pat.hipertension %}<span class="text-danger fw-semibold">Sí</span>{% else %}<span class="text-secondary fw-semibold">No</span>{% endif %}</p></div>
                            <div class="col-md-4"><p><strong>Diabetes:</strong> {% if antecedentes_pat.diabetes %}<span class="text-danger fw-semibold">Sí</span>{% else %}<span class="text-secondary fw-semibold">No</span>{% endif %}</p></div>
                            <div class="col-md-4"><p><strong>Cáncer:</strong> {% if antecedentes_pat.cancer %}<span class="text-danger fw-semibold">Sí</span>{% else %}<span class="text-secondary fw-semibold">No</span>{% endif %}</p></div>
                            <div class="col-md-4"><p><strong>Triglicéridos:</strong> {% if antecedentes_pat.trigliceridos %}<span class="text-danger fw-semibold">Sí</span>{% else %}<span class="text-secondary fw-semibold">No</span>{% endif %}</p></div>
                            <div class="col-md-4"><p><strong>Obesidad:</strong> {% if antecedentes_pat.obesidad %}<span class="text-danger fw-semibold">Sí</span>{% else %}<span class="text-secondary fw-semibold">No</span>{% endif %}</p></div>
                            <div class="col-md-4"><p><strong>Tiroides:</strong> {% if antecedentes_pat.tiroides %}<span class="text-danger fw-semibold">Sí</span>{% else %}<span class="text-secondary fw-semibold">No</span>{% endif %}</p></div>
                        </div>
                        {% if mostrar_campos_femeninos %}
                        <div class="row mt-3">
                            <div class="col-md-4"><p><strong>SOP:</strong> {% if antecedentes_pat.sop %}<span class="text-danger fw-semibold">Sí</span>{% else %}<span class="text-secondary fw-semibold">No</span>{% endif %}</p></div>
                            <div class="col-md-4"><p><strong>Menopausia:</strong> {% if antecedentes_pat.menopausia %}<span class="text-danger fw-semibold">Sí</span>{% else %}<span class="text-secondary fw-semibold">No</span>{% endif %}</p></div>
                            <div class="col-md-4"><p><strong>Probabilidad de embarazo:</strong> {% if antecedentes_pat.probabilidad_embarazo %}<span class="text-danger fw-semibold">Sí</span>{% else %}<span class="text-secondary fw-semibold">No</span>{% endif %}</p></div>
                            <div class="col-md-6"><p><strong>Fecha última menstruación:</strong> {{ antecedentes_pat.fecha_ultima_menstruacion|date:"d/m/Y"|default:"-" }}</p></div>
                            <div class="col-md-6"><p><strong>Número de partos:</strong> {{ antecedentes_pat.numero_partos|default:"0" }}</p></div>
                        </div>
                        {% endif %}
                        <p class="mt-3"><strong>Cirugías:</strong> {{ antecedentes_pat.cirugias|default:"-" }}</p>
                        <p><strong>Notas:</strong> {{ antecedentes_pat.notas|default:"-" }}</p>
                        {% endif %}

                        {% if antecedentes %}
                        <h6 class="mb-3 mt-4 border-bottom pb-2"><i class="fas fa-notes-medical"></i> Antecedentes no patológicos</h6>
                        <p><strong>Diagnóstico:</strong> {{ antecedentes.diagnostico|default:"-" }}</p>
                        <p><strong>Pronóstico:</strong> {{ antecedentes.pronostico|default:"-" }}</p>

                        <h6 class="mb-3 mt-4 border-bottom pb-2"><i class="fas fa-running"></i> Actividad física</h6>
                        <p><strong>Realiza actividad física:</strong> {% if antecedentes.realiza_actividad_fisica %}<span class="text-danger fw-semibold">Sí</span>{% else %}<span class="text-secondary fw-semibold">No</span>{% endif %}</p>
                        <p><strong>Frecuencia:</strong> {{ antecedentes.get_frecuencia_ejercicio_display|default:"-" }}</p>
                        <p><strong>Tipo de ejercicio:</strong> {{ antecedentes.tipo_ejercicio|default:"-" }}</p>

                        <h6 class="mb-3 mt-4 border-bottom pb-2"><i class="fas fa-apple-alt"></i> Alimentación y dieta</h6>
                        <p><strong>Tipo de alimentación:</strong> {{ antecedentes.get_tipo_alimentacion_display|default:"-" }}</p>
                        <p><strong>Régimen alimenticio:</strong> {{ antecedentes.regimen_alimenticio|default:"-" }}</p>
                        <p><strong>Carnes:</strong> {{ antecedentes.carnes|default:"-" }}</p>
                        <p><strong>Legumbres:</strong> {{ antecedentes.legumbres|default:"-" }}</p>
                        <p><strong>Hidratos de carbono:</strong> {{ antecedentes.hidratos_carbono|default:"-" }}</p>
                        <p><strong>Lípidos:</strong> {{ antecedentes.lipidos|default:"-" }}</p>
                        <p><strong>Proteínas:</strong> {{ antecedentes.proteinas|default:"-" }}</p>
                        <p><strong>Dieta:</strong> {{ antecedentes.dieta|default:"-" }}</p>
                        <p><strong>Notas de dieta:</strong> {{ antecedentes.notas_dieta|default:"-" }}</p>

                        <h6 class="mb-3 mt-4 border-bottom pb-2"><i class="fas fa-bed"></i> Sueño</h6>
                        <p><strong>Horas de sueño:</strong> {{ antecedentes.horas_sueno|default:"-" }}</p>
                        <p><strong>Calidad del sueño:</strong> {{ antecedentes.calidad_sueno|default:"-" }}</p>

                        <h6 class="mb-3 mt-4 border-bottom pb-2"><i class="fas fa-tint"></i> Hidratación</h6>
                        <p><strong>Hidratación:</strong> {{ antecedentes.hidratacion|default:"-" }}</p>
                        <p><strong>Litros de agua diarios:</strong> {{ antecedentes.litros_agua_diarios|default:"-" }}</p>

                        <h6 class="mb-3 mt-4 border-bottom pb-2"><i class="fas fa-capsules"></i> Suplementación</h6>
                        <p><strong>Detalle:</strong> {{ antecedentes.suplementacion|default:"-" }}</p>
                        {% endif %}
                    {% else %}
                        <div class="alert alert-info mb-0">
                            No hay antecedentes registrados.
                        </div>
                    {% endif %}
                </div>
                <div class="card-footer bg-light">
                    <a href="{% url 'pacientes:antecedentes-patologicos-lista' %}" class="btn btn-secondary btn-sm">
                        <i class="fas fa-arrow-left"></i> Volver a antecedentes
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
