{% extends 'base/base.html' %}

{% block title %}Antecedentes Patológicos{% endblock %}
{% block page_title %}Antecedentes Patológicos{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row">
        <div class="col-lg-8 offset-lg-2">
            <div class="card border-0 shadow-sm">
                <div class="card-header bg-light d-flex justify-content-between align-items-center">
                    <div>
                        <h5 class="mb-0"><i class="fas fa-heart"></i> Antecedentes Patológicos</h5>
                        <small class="text-muted">{{ paciente.nombre_completo }}</small>
                    </div>
                    <a href="{% url 'pacientes:antecedentes-patologicos-lista' %}" class="btn btn-outline-secondary btn-sm">
                        <i class="fas fa-arrow-left"></i> Volver al listado
                    </a>
                </div>
                <div class="card-body">
                    {% if antecedentes_pat %}
                        <div class="row">
                            <div class="col-md-4"><p><strong>Hipertensión:</strong> {% if antecedentes_pat.hipertension %}<span class="text-danger fw-semibold">Sí</span>{% else %}<span class="text-secondary fw-semibold">No</span>{% endif %}</p></div>
                            <div class="col-md-4"><p><strong>Diabetes:</strong> {% if antecedentes_pat.diabetes %}<span class="text-danger fw-semibold">Sí</span>{% else %}<span class="text-secondary fw-semibold">No</span>{% endif %}</p></div>
                            <div class="col-md-4"><p><strong>Cáncer:</strong> {% if antecedentes_pat.cancer %}<span class="text-danger fw-semibold">Sí</span>{% else %}<span class="text-secondary fw-semibold">No</span>{% endif %}</p></div>
                            <div class="col-md-4"><p><strong>Triglicéridos:</strong> {% if antecedentes_pat.trigliceridos %}<span class="text-danger fw-semibold">Sí</span>{% else %}<span class="text-secondary fw-semibold">No</span>{% endif %}</p></div>
                            <div class="col-md-4"><p><strong>Obesidad:</strong> {% if antecedentes_pat.obesidad %}<span class="text-danger fw-semibold">Sí</span>{% else %}<span class="text-secondary fw-semibold">No</span>{% endif %}</p></div>
                            <div class="col-md-4"><p><strong>Tiroides:</strong> {% if antecedentes_pat.tiroides %}<span class="text-danger fw-semibold">Sí</span>{% else %}<span class="text-secondary fw-semibold">No</span>{% endif %}</p></div>
                        </div>

                        {% if mostrar_campos_femeninos %}
                        <div class="row mt-3">
                            <div class="col-md-4"><p><strong>SOP:</strong> {% if antecedentes_pat.sop %}<span class="text-danger fw-semibold">Sí</span>{% else %}<span class="text-secondary fw-semibold">No</span>{% endif %}</p></div>
                            <div class="col-md-4"><p><strong>Menopausia:</strong> {% if antecedentes_pat.menopausia %}<span class="text-danger fw-semibold">Sí</span>{% else %}<span class="text-secondary fw-semibold">No</span>{% endif %}</p></div>
                            <div class="col-md-4"><p><strong>Probabilidad de embarazo:</strong> {% if antecedentes_pat.probabilidad_embarazo %}<span class="text-danger fw-semibold">Sí</span>{% else %}<span class="text-secondary fw-semibold">No</span>{% endif %}</p></div>
                            <div class="col-md-6"><p><strong>Fecha última menstruación:</strong> {{ antecedentes_pat.fecha_ultima_menstruacion|date:"d/m/Y"|default:"-" }}</p></div>
                            <div class="col-md-6"><p><strong>Número de partos:</strong> {{ antecedentes_pat.numero_partos|default:"0" }}</p></div>
                        </div>
                        {% endif %}

                        <h6 class="mt-4 border-bottom pb-2"><i class="fas fa-scalpel"></i> Cirugías</h6>
                        <p>{{ antecedentes_pat.cirugias|default:"-" }}</p>

                        <h6 class="mt-4 border-bottom pb-2"><i class="fas fa-sticky-note"></i> Notas</h6>
                        <p>{{ antecedentes_pat.notas|default:"-" }}</p>
                    {% else %}
                        <div class="alert alert-info mb-0">No hay antecedentes patológicos registrados.</div>
                    {% endif %}
                </div>
                <div class="card-footer bg-light d-flex justify-content-between align-items-center">
                    <a href="{% url 'pacientes:antecedentes-patologicos-lista' %}" class="btn btn-secondary btn-sm">
                        <i class="fas fa-arrow-left"></i> Volver al listado
                    </a>
                    <a href="{% url 'pacientes:antecedentes-patologicos-editar' paciente.pk %}" class="btn btn-primary btn-sm">
                        <i class="fas fa-edit"></i> Editar
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
